<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8" />
<title>Board Game Timer</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<meta name="theme-color" content="#111" />
<link rel="manifest" href="manifest.webmanifest" />

<style>
html, body { margin:0; height:100%; font-family: Arial, sans-serif; }

.screen {
  display:flex; flex-direction:column; justify-content:center; align-items:center;
  height:100%; background:#222; color:#fff;
}

.btn {
  font-size:22px; padding:15px 30px; margin:10px;
  border:none; border-radius:14px; background:#444; color:#fff;
}

/* ---- ÜST BAR ---- */
.topbar {
  position:absolute; top:0; left:0; right:0;
  height:60px; display:flex; align-items:center;
  justify-content:space-between; padding:0 16px;
  background:rgba(0,0,0,0.6);
}

.menuBtn {
  font-size:28px;
  background:none;
  border:none;
  color:white;
}

.roundBtn {
  font-size:18px;
  padding:10px 18px;
  border-radius:14px;
  border:none;
  background:#333;
  color:white;
}

/* ---- GRID ---- */
#game { display:none; height:100%; position:relative; }

.grid {
  display:grid;
  height:100%;
  margin-top:60px; /* üst bar boşluğu */
}

.player {
  display:flex; align-items:center; justify-content:center;
  font-size:2.2em;
  opacity:.85;
  transition:.15s;
}

.active {
  opacity:1;
  font-weight:bold;
  box-shadow: inset 0 0 20px rgba(0,0,0,0.25);
}
</style>
</head>

<body>

<!-- WELCOME -->
<div id="welcomeScreen" class="screen">
  <h1>Welcome Board Game Timer</h1>
  <button class="btn" onclick="closeWelcome()">Start</button>
</div>

<!-- PLAYER SELECT -->
<div id="playerScreen" class="screen" style="display:none;">
  <h1>Kaç kişisiniz?</h1>
  <button class="btn" onclick="setPlayers(2)">2</button>
  <button class="btn" onclick="setPlayers(3)">3</button>
  <button class="btn" onclick="setPlayers(4)">4</button>
  <button class="btn" onclick="setPlayers(5)">5</button>
</div>

<!-- GAME -->
<div id="game">
  <div class="topbar">
    <button class="menuBtn" onclick="goToMenu()">☰</button>
    <button class="roundBtn" id="roundBtn" onclick="nextRound()">Round 1</button>
  </div>
  <div id="grid" class="grid"></div>
</div>

<script>
const palette = [
  "#F7F7F7", // Beyaz
  "#F4A7A7", // Kırmızı
  "#A7C7F4", // Mavi
  "#F4E7A7", // Sarı
  "#1C1C1C", // Siyah
  "#F4C7A7", // Turuncu
  "#A7F4C7"  // Yeşil
];

let players=0, times=[], current=0, round=1;

function closeWelcome(){
  welcomeScreen.style.display="none";
  playerScreen.style.display="flex";
}

function setPlayers(c){
  players=c;
  playerScreen.style.display="none";
  game.style.display="block";
  startGame();
}

function goToMenu(){
  game.style.display="none";
  playerScreen.style.display="flex";
}

function startGame(){
  times = Array(players).fill(300);
  buildGrid();
  render();
}

function buildGrid(){
  grid.innerHTML="";
  grid.style.gridTemplateColumns="1fr 1fr";
  grid.style.gridTemplateRows=players<=2?"1fr":"1fr 1fr";

  for(let i=0;i<players;i++){
    const d=document.createElement("div");
    d.className="player";
    d.style.background=palette[i];
    d.style.color = palette[i]==="#F7F7F7" ? "#000" : "#fff";
    d.id="p"+i;
    d.onclick=()=>tap(i);
    grid.appendChild(d);
  }
}

function format(t){
  return Math.floor(t/60)+":"+String(t%60).padStart(2,"0");
}

function render(){
  for(let i=0;i<players;i++){
    const e=document.getElementById("p"+i);
    e.textContent=format(times[i]);
    e.classList.toggle("active", i===current);
  }
}

setInterval(()=>{
  if(times[current]>0){
    times[current]--;
    render();
  }
},1000);

function tap(i){
  if(i===current){
    current=(current+1)%players;
    render();
  }
}

/* ROUND BUTONU TEK */
function nextRound(){
  round = (round % 20) + 1;
  roundBtn.textContent = "Round " + round;
}
</script>

</body>
</html>
